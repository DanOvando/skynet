Revamped run with all the options
